(()=>{"use strict";function t(t,e){const o=Math.ceil(Math.min(Math.abs(t),Math.abs(e))),n=Math.floor(Math.max(Math.abs(t),Math.abs(e))),r=Math.random()*(n-o+1)+o;return Math.floor(r)}function e(t,e,o=1){const n=Math.min(Math.abs(t),Math.abs(e)),r=Math.max(Math.abs(t),Math.abs(e));return(Math.random()*(r-n)+n).toFixed(o)}function o(e){return e[t(0,e.length-1)]}function n(e){const o=e.length-1;return e.slice(t(0,o))}const r=["palace","flat","house","bungalow","hotel"],a=["12:00","13:00","14:00"],c=["wifi","dishwasher","parking","washer","elevator","conditioner"],s=["https://assets.htmlacademy.ru/content/intensive/javascript-1/keksobooking/duonguyen-8LrGtIxxa4w.jpg","https://assets.htmlacademy.ru/content/intensive/javascript-1/keksobooking/brandon-hoogenboom-SNxQGWxZQi0.jpg","https://assets.htmlacademy.ru/content/intensive/javascript-1/keksobooking/claire-rendall-b6kAwr1i0Iw.jpg"],p={x:e(35.65,35.7,5),y:e(139.7,139.8,5)},u=`0${t(1,8)}`;function i(){return Array.from({length:10},(()=>({AUTHOR:{avatar:`img/avatars/user${u}.png`},OFFER:{title:"строка — заголовок",address:{location:p},price:t(1e3,1e6),type:o(r),rooms:t(1,8),guests:t(1,8),checkin:o(a),checkout:o(a),features:n(c),description:"строка — описание",photos:n(s)}})))}const l=i()[0].OFFER,h=i()[0].AUTHOR;function d(t,e){const o=(t,e)=>t>=5?e[2]:t>1&&t<5?e[1]:1===t?e[0]:void 0;return"rooms"===t?o(e,["комната","комнаты","комнат"]):"guests"===t?o(e,["гостя","гостей","гостей"]):void 0}const m=l.features.map((t=>`popup__feature--${t}`));document.querySelector("#map-canvas").appendChild(function(){const t=document.querySelector("#card").content.querySelector(".popup").cloneNode(!0);return t.querySelector(".popup__title").textContent=l.title,t.querySelector(".popup__text--address").textContent=l.address,t.querySelector(".popup__text--price").textContent=l.price,t.querySelector(".popup__type").textContent=function(){let t;switch(l.type){case"flat":t="Квартира";break;case"bungalow":t="Бунгало";break;case"house":t="Дом";break;case"palace":t="Дворец";break;case"hotel":t="Отель"}return t}(),t.querySelector(".popup__text--capacity").textContent=`${l.rooms} ${d("rooms",l.rooms)} для ${l.guests} ${d("guests",l.guests)}`,t.querySelector(".popup__text--time").textContent=`Заезд после ${l.checkin}, выезд до ${l.checkout}`,t.querySelectorAll(".popup__feature").forEach((t=>{const e=t.classList[1];m.includes(e)||t.remove()})),t.querySelector(".popup__description").textContent=l.description,t.querySelector(".popup__photos"),function(t){const e=t.querySelector(".popup__photo"),o=[];for(let t=0;t<l.photos.length;t++)o.push(e.cloneNode(!0));e.remove(),o.forEach(((e,o)=>{e.setAttribute("src",l.photos[o]),t.appendChild(e)}))}(t.querySelector(".popup__photos")),t.querySelector(".popup__avatar").setAttribute("src",h.avatar),function(){for(let e=1;e<t.children.length;e++)void 0!==t.children[e].textContent&&null!==t.children[e].textContent&&""!==t.children[e].textContent&&"[object Object]"!==t.children[e].textContent||t.children[e].remove();""===t.children[0].getAttribute("src")&&t.children[0].remove()}(),t}())})();