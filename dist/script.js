(()=>{"use strict";function e(e,t){const o=Math.ceil(Math.min(Math.abs(e),Math.abs(t))),r=Math.floor(Math.max(Math.abs(e),Math.abs(t))),n=Math.random()*(r-o+1)+o;return Math.floor(n)}function t(e,t,o=1){const r=Math.min(Math.abs(e),Math.abs(t)),n=Math.max(Math.abs(e),Math.abs(t));return(Math.random()*(n-r)+r).toFixed(o)}function o(t){return t[e(0,t.length-1)]}function r(t){const o=t.length-1;return t.slice(e(0,o))}const n=["palace","flat","house","bungalow","hotel"],c=["12:00","13:00","14:00"],a=["wifi","dishwasher","parking","washer","elevator","conditioner"],s=["https://assets.htmlacademy.ru/content/intensive/javascript-1/keksobooking/duonguyen-8LrGtIxxa4w.jpg","https://assets.htmlacademy.ru/content/intensive/javascript-1/keksobooking/brandon-hoogenboom-SNxQGWxZQi0.jpg","https://assets.htmlacademy.ru/content/intensive/javascript-1/keksobooking/claire-rendall-b6kAwr1i0Iw.jpg"],u=document.querySelector("#card").content.querySelector(".popup").cloneNode(!0);function i(e,t){return e>=5?t[2]:1===e?t[0]:t[1]}function l(e,t){return"rooms"===e?i(t,["комната","комнаты","комнат"]):"guests"===e?i(t,["гостя","гостей","гостей"]):void 0}const p=Array.from({length:10},(()=>function(){const u={x:t(35.65,35.7,5),y:t(139.7,139.8,5)};return{AUTHOR:{avatar:`img/avatars/user0${e(1,8)}.png`},OFFER:{title:"строка — заголовок",address:{location:u},price:e(1e3,1e6),type:o(n),rooms:e(1,8),guests:e(1,8),checkin:o(c),checkout:o(c),features:r(a),description:"строка — описание",photos:r(s)}}}()));function h(e){const t=e.OFFER,o=e.AUTHOR;return function(e){const t=u.querySelector(".popup__title");e.title?t.textContent=e.title:t.remove()}(t),function(e){const t=u.querySelector(".popup__text--address");e.address.location.x&&e.address.location.y?t.textContent=`${e.address.location.x}, ${e.address.location.y}`:t.remove()}(t),function(e){const t=u.querySelector(".popup__text--price");e.price?t.textContent=`${e.price} ₽/ночь`:t.remove()}(t),function(e){const t=u.querySelector(".popup__type");e.type?t.textContent=function(e){switch(e){case"flat":return"Квартира";case"bungalow":return"Бунгало";case"house":return"Дом";case"palace":return"Дворец";case"hotel":return"Отель"}}(e.type):t.remove()}(t),function(e){const t=u.querySelector(".popup__text--capacity");e.rooms&&e.guests||t.remove(),t.textContent=`${e.rooms} ${l("rooms",e.rooms)} для ${e.guests} ${l("guests",e.guests)}`}(t),function(e){const t=u.querySelector(".popup__text--time");e.checkin&&e.checkout?t.textContent=`Заезд после ${e.checkin}, выезд до ${e.checkout}`:t.remove()}(t),function(e){const t=u.querySelectorAll(".popup__feature"),o=u.querySelectorAll(".popup__features");if(!e.features)return void o.remove();const r=e.features.map((e=>`popup__feature--${e}`));t.forEach((e=>{const t=e.classList[1];r.includes(t)||e.remove()}))}(t),function(e){const t=u.querySelector(".popup__description");e.description?t.textContent=e.description:t.remove()}(t),function(e){const t=u.querySelector(".popup__photos"),o=t.querySelector(".popup__photo"),r=[];if(e.photos){for(let t=0;t<e.photos.length;t++)r.push(o.cloneNode(!0));o.remove(),r.forEach(((o,r)=>{o.setAttribute("src",e.photos[r]),t.appendChild(o)}))}else t.remove()}(t),function(e){const t=u.querySelector(".popup__avatar");e.avatar?t.setAttribute("src",e.avatar):t.remove()}(o),u}const d=document.querySelector("#type"),m=document.querySelector("#price"),f=document.querySelector("#timein"),b=document.querySelector("#timeout"),v=document.querySelector("#room_number"),y=document.querySelector("#capacity");function g(){function e(e){return y.querySelector(`option[value="${e}"]`).removeAttribute("disabled")}switch(y.querySelectorAll("option").forEach((e=>{e.setAttribute("disabled","disabled")})),v.value){case"1":e("1"),y.value="1";break;case"2":e("1"),e("2"),y.value="2";break;case"3":e("1"),e("2"),e("3"),y.value="3";break;case"100":e("0"),y.value="0"}}g(),function(e){for(let t=0;t<p.length;t++)e.appendChild(h(p[t]).cloneNode(!0))}(document.querySelector("#map-canvas")),d.addEventListener("change",(function(){switch(d.value){case"bungalow":m.setAttribute("min","0"),m.setAttribute("placeholder","0");break;case"flat":m.setAttribute("min","1000"),m.setAttribute("placeholder","1 000");break;case"hotel":m.setAttribute("min","3000"),m.setAttribute("placeholder","3 000");break;case"house":m.setAttribute("min","5000"),m.setAttribute("placeholder","5 000");break;case"palace":m.setAttribute("min","10000"),m.setAttribute("placeholder","10 000")}})),m.addEventListener("input",(function(){m.reportValidity()})),f.addEventListener("change",(function(){b.value=f.value})),v.addEventListener("change",g)})();