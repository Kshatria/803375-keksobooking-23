(()=>{"use strict";function e(e,t){const o=Math.ceil(Math.min(Math.abs(e),Math.abs(t))),n=Math.floor(Math.max(Math.abs(e),Math.abs(t))),r=Math.random()*(n-o+1)+o;return Math.floor(r)}function t(e,t,o=1){const n=Math.min(Math.abs(e),Math.abs(t)),r=Math.max(Math.abs(e),Math.abs(t));return(Math.random()*(r-n)+n).toFixed(o)}function o(t){return t[e(0,t.length-1)]}function n(t){const o=t.length-1;return t.slice(e(0,o))}const r=["palace","flat","house","bungalow","hotel"],c=["12:00","13:00","14:00"],a=["wifi","dishwasher","parking","washer","elevator","conditioner"],s=["https://assets.htmlacademy.ru/content/intensive/javascript-1/keksobooking/duonguyen-8LrGtIxxa4w.jpg","https://assets.htmlacademy.ru/content/intensive/javascript-1/keksobooking/brandon-hoogenboom-SNxQGWxZQi0.jpg","https://assets.htmlacademy.ru/content/intensive/javascript-1/keksobooking/claire-rendall-b6kAwr1i0Iw.jpg"],u=document.querySelector("#card").content.querySelector(".popup").cloneNode(!0);function i(e,t){return e>=5?t[2]:1===e?t[0]:t[1]}function l(e,t){return"rooms"===e?i(t,["комната","комнаты","комнат"]):"guests"===e?i(t,["гостя","гостей","гостей"]):void 0}const p=Array.from({length:10},(()=>function(){const u={x:t(35.65,35.7,5),y:t(139.7,139.8,5)};return{AUTHOR:{avatar:`img/avatars/user0${e(1,8)}.png`},OFFER:{title:"строка — заголовок",address:{location:u},price:e(1e3,1e6),type:o(r),rooms:e(1,8),guests:e(1,8),checkin:o(c),checkout:o(c),features:n(a),description:"строка — описание",photos:n(s)}}}()));function d(e){const t=e.OFFER,o=e.AUTHOR;return function(e){const t=u.querySelector(".popup__title");e.title?t.textContent=e.title:t.remove()}(t),function(e){const t=u.querySelector(".popup__text--address");e.address.location.x&&e.address.location.y?t.textContent=`${e.address.location.x}, ${e.address.location.y}`:t.remove()}(t),function(e){const t=u.querySelector(".popup__text--price");e.price?t.textContent=`${e.price} ₽/ночь`:t.remove()}(t),function(e){const t=u.querySelector(".popup__type");e.type?t.textContent=function(e){switch(e){case"flat":return"Квартира";case"bungalow":return"Бунгало";case"house":return"Дом";case"palace":return"Дворец";case"hotel":return"Отель"}}(e.type):t.remove()}(t),function(e){const t=u.querySelector(".popup__text--capacity");e.rooms&&e.guests||t.remove(),t.textContent=`${e.rooms} ${l("rooms",e.rooms)} для ${e.guests} ${l("guests",e.guests)}`}(t),function(e){const t=u.querySelector(".popup__text--time");e.checkin&&e.checkout?t.textContent=`Заезд после ${e.checkin}, выезд до ${e.checkout}`:t.remove()}(t),function(e){const t=u.querySelectorAll(".popup__feature"),o=u.querySelectorAll(".popup__features");if(!e.features)return void o.remove();const n=e.features.map((e=>`popup__feature--${e}`));t.forEach((e=>{const t=e.classList[1];n.includes(t)||e.remove()}))}(t),function(e){const t=u.querySelector(".popup__description");e.description?t.textContent=e.description:t.remove()}(t),function(e){const t=u.querySelector(".popup__photos"),o=t.querySelector(".popup__photo"),n=[];if(e.photos){for(let t=0;t<e.photos.length;t++)n.push(o.cloneNode(!0));o.remove(),n.forEach(((o,n)=>{o.setAttribute("src",e.photos[n]),t.appendChild(o)}))}else t.remove()}(t),function(e){const t=u.querySelector(".popup__avatar");e.avatar?t.setAttribute("src",e.avatar):t.remove()}(o),u}function h(e,t){function o(t){return e.querySelector(`option[value="${t}"]`).removeAttribute("disabled")}switch(e.querySelectorAll("option").forEach((e=>{e.setAttribute("disabled","disabled")})),t.value){case"1":o("1"),e.value="1";break;case"2":o("1"),o("2"),e.value="2";break;case"3":o("1"),o("2"),o("3"),e.value="3";break;case"100":o("0"),e.value="0"}}!function(e){for(let t=0;t<p.length;t++)e.appendChild(d(p[t]).cloneNode(!0))}(document.querySelector("#map-canvas")),function(){const e=document.querySelector("#type"),t=document.querySelector("#price"),o=document.querySelector("#timein"),n=document.querySelector("#timeout"),r=document.querySelector("#room_number"),c=document.querySelector("#capacity");document.addEventListener("DOMContentLoaded",h(c,r)),e.addEventListener("change",(()=>function(e,t){switch(t.value){case"bungalow":e.setAttribute("min","0"),e.setAttribute("placeholder","0");break;case"flat":e.setAttribute("min","1000"),e.setAttribute("placeholder","1 000");break;case"hotel":e.setAttribute("min","3000"),e.setAttribute("placeholder","3 000");break;case"house":e.setAttribute("min","5000"),e.setAttribute("placeholder","5 000");break;case"palace":e.setAttribute("min","10000"),e.setAttribute("placeholder","10 000")}}(t,e))),t.addEventListener("input",(()=>function(e){e.reportValidity()}(t))),o.addEventListener("change",(()=>function(e,t){t.value=e.value}(o,n))),r.addEventListener("change",(()=>h(c,r)))}()})();