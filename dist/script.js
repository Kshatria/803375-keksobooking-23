(()=>{"use strict";function e(e,t){const o=Math.ceil(Math.min(Math.abs(e),Math.abs(t))),r=Math.floor(Math.max(Math.abs(e),Math.abs(t))),n=Math.random()*(r-o+1)+o;return Math.floor(n)}function t(e,t,o=1){const r=Math.min(Math.abs(e),Math.abs(t)),n=Math.max(Math.abs(e),Math.abs(t));return(Math.random()*(n-r)+r).toFixed(o)}function o(t){return t[e(0,t.length-1)]}function r(t){const o=t.length-1;return t.slice(e(0,o))}const n=["palace","flat","house","bungalow","hotel"],c=["12:00","13:00","14:00"],a=["wifi","dishwasher","parking","washer","elevator","conditioner"],s=["https://assets.htmlacademy.ru/content/intensive/javascript-1/keksobooking/duonguyen-8LrGtIxxa4w.jpg","https://assets.htmlacademy.ru/content/intensive/javascript-1/keksobooking/brandon-hoogenboom-SNxQGWxZQi0.jpg","https://assets.htmlacademy.ru/content/intensive/javascript-1/keksobooking/claire-rendall-b6kAwr1i0Iw.jpg"];function u(e,t){return e>=5?t[2]:1===e?t[0]:t[1]}function i(e,t){return"rooms"===e?u(t,["комната","комнаты","комнат"]):"guests"===e?u(t,["гостя","гостей","гостей"]):void 0}function l(e,t){function o(t){return e.querySelector(`option[value="${t}"]`).removeAttribute("disabled")}switch(e.querySelectorAll("option").forEach((e=>{e.setAttribute("disabled","disabled")})),t.value){case"1":o("1"),e.value="1";break;case"2":o("1"),o("2"),e.value="2";break;case"3":o("1"),o("2"),o("3"),e.value="3";break;case"100":o("0"),e.value="0"}}const p=document.querySelector(".ad-form"),d=document.querySelector(".map__filters");function h(e){const t=e.classList[0];e.classList.remove(`${t}--disabled`),e.querySelectorAll("fieldset").forEach((e=>{e.removeAttribute("disabled")})),e.querySelectorAll("select").forEach((e=>{e.removeAttribute("disabled")}))}const m=document.querySelector("#map-canvas");!function(){const e=document.querySelector("#type"),t=document.querySelector("#price"),o=document.querySelector("#timein"),r=document.querySelector("#timeout"),n=document.querySelector("#room_number"),c=document.querySelector("#capacity");document.addEventListener("DOMContentLoaded",l(c,n)),e.addEventListener("change",(()=>function(e,t){switch(t.value){case"bungalow":e.setAttribute("min","0"),e.setAttribute("placeholder","0");break;case"flat":e.setAttribute("min","1000"),e.setAttribute("placeholder","1 000");break;case"hotel":e.setAttribute("min","3000"),e.setAttribute("placeholder","3 000");break;case"house":e.setAttribute("min","5000"),e.setAttribute("placeholder","5 000");break;case"palace":e.setAttribute("min","10000"),e.setAttribute("placeholder","10 000")}}(t,e))),t.addEventListener("input",(()=>function(e){e.reportValidity()}(t))),o.addEventListener("change",(()=>function(e,t){t.value=e.value}(o,r))),n.addEventListener("change",(()=>l(c,n)))}(),m.appendChild(function(e){const t=e.OFFER,o=e.AUTHOR,r=document.querySelector("#card").content.querySelector(".popup").cloneNode(!0);return function(e,t){const o=t.querySelector(".popup__title");e.title?o.textContent=e.title:o.remove()}(t,r),function(e,t){const o=t.querySelector(".popup__text--address");e.address.location.x&&e.address.location.y?o.textContent=`${e.address.location.x}, ${e.address.location.y}`:o.remove()}(t,r),function(e,t){const o=t.querySelector(".popup__text--price");e.price?o.textContent=`${e.price} ₽/ночь`:o.remove()}(t,r),function(e,t){const o=t.querySelector(".popup__type");e.type?o.textContent=function(e){switch(e){case"flat":return"Квартира";case"bungalow":return"Бунгало";case"house":return"Дом";case"palace":return"Дворец";case"hotel":return"Отель"}}(e.type):o.remove()}(t,r),function(e,t){const o=t.querySelector(".popup__text--capacity");e.rooms&&e.guests||o.remove(),o.textContent=`${e.rooms} ${i("rooms",e.rooms)} для ${e.guests} ${i("guests",e.guests)}`}(t,r),function(e,t){const o=t.querySelector(".popup__text--time");e.checkin&&e.checkout?o.textContent=`Заезд после ${e.checkin}, выезд до ${e.checkout}`:o.remove()}(t,r),function(e,t){const o=t.querySelectorAll(".popup__feature"),r=t.querySelectorAll(".popup__features");if(!e.features)return void r.remove();const n=e.features.map((e=>`popup__feature--${e}`));o.forEach((e=>{const t=e.classList[1];n.includes(t)||e.remove()}))}(t,r),function(e,t){const o=t.querySelector(".popup__description");e.description?o.textContent=e.description:o.remove()}(t,r),function(e,t){const o=t.querySelector(".popup__photos"),r=o.querySelector(".popup__photo"),n=[];if(e.photos){for(let t=0;t<e.photos.length;t++)n.push(r.cloneNode(!0));r.remove(),n.forEach(((t,r)=>{t.setAttribute("src",e.photos[r]),o.appendChild(t)}))}else o.remove()}(t,r),function(e,t){const o=t.querySelector(".popup__avatar");e.avatar?o.setAttribute("src",e.avatar):o.remove()}(o,r),r}(Array.from({length:1},(()=>function(){const u={x:t(35.65,35.7,5),y:t(139.7,139.8,5)};return{AUTHOR:{avatar:`img/avatars/user0${e(1,8)}.png`},OFFER:{title:"строка — заголовок",address:{location:u},price:e(1e3,1e6),type:o(n),rooms:e(1,8),guests:e(1,8),checkin:o(c),checkout:o(c),features:r(a),description:"строка — описание",photos:r(s)}}}()))[0])),h(p),h(d)})();